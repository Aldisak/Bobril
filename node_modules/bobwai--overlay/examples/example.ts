import * as b from "bobril";
import * as Overlay from "../src/lib";
import * as Container from "bobwai--viewer-container";
import * as Example from "bobwai--example";
import * as Button from "bobwai--button";

let overlayID: string;
let isOpen = false;

function showOverlay(isVisible?: boolean): void {
    overlayID = b.addRoot(
        (): b.IBobrilNode => {
            return Overlay.create({
                onClick: (): void => {
                    b.removeRoot(overlayID);
                    b.invalidate();
                    isOpen = false;
                },
                isVisible: isVisible,
            });
        }
    );
    isOpen = true;
}

Example.init({}, () => {
    return [
        Container.create({
            header: "Overlay",
            content: [
                Button.create({
                    onClick: (): void => {
                        showOverlay();
                    },
                    label: "Show invisible overlay",
                }),
                isOpen && b.styledDiv("Click anywhere to close an overlay.", infoStyle),
            ],
        }),
        Container.create({
            header: "Overlay - visible",
            content: [
                Button.create({
                    onClick: (): void => {
                        showOverlay(true);
                    },
                    label: "Show visible overlay",
                }),
            ],
        }),
    ];
});

const infoStyle = b.styleDef({
    position: "absolute",
    color: "red",
    background: "orange",
    borderColor: "red",
    borderStyle: "solid",
    borderWidth: 1,
    verticalAlign: "center",
    textAlign: "center",
    top: "calc(50% - 30px)",
    bottom: "calc(50% - 30px)",
    left: "10%",
    right: "10%",
    padding: 13,
    fontSize: "200%",
});
