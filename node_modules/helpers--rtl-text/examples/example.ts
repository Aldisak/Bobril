import * as b from "bobril";
import * as Container from "bobwai--viewer-container";
import * as Example from "bobwai--example";
import * as Label from "bobwai--label";
import * as Combobox from "bobwai--combobox";
import * as LField from "bobwai--l-field";
import * as LFieldGroup from "bobwai--l-field-group";
import * as FormElements from "bobwai--form-elements";
import * as Color from "bobwai--color";
import * as HelpersRTLText from "../src/lib";

const labelWidth = 200;
const valueWidth = 120;

let defaultValue: string = "Have a nice day !";
let rtlTextValue: string = "أتمنى لك نهارا سعيد أتمنى لك نهارا سعيد";
let enableRTL: boolean;
let textAlignment: FormElements.TextAlign;

Example.init({}, () => {
    return [
        Container.create({
            header: "helpers--rtl-text",
            description: "Helpers for supporting right-to-left languages (arabic, hebrew)",
            content: LFieldGroup.create({
                children: [
                    LField.create({
                        labelContent: "Default language",
                        labelWidth: labelWidth,
                        valueContent: createLabel(defaultValue)
                    }),
                    LField.create({
                        labelContent: "Right To Left language",
                        labelWidth: labelWidth,
                        valueContent: createLabel(rtlTextValue)
                    }),
                    LField.create({
                        labelContent: "Enable / Disable RTL",
                        labelWidth: labelWidth,
                        valueContentWidth: valueWidth,
                        valueContent: createEnableRTLCombobox()
                    }),
                    LField.create({
                        labelContent: "Text align",
                        labelWidth: labelWidth,
                        valueContentWidth: valueWidth,
                        valueContent: createTextAlignmentCombobox()
                    })
                ]
            })
        })
    ];
});

function createLabel(content: string): b.IBobrilNode {
    return b.styledDiv(
        Label.create({
            children: content,
            isSimple: true
        }),
        {
            backgroundColor: Color.Grey300,
            padding: 10
        },
        HelpersRTLText.getRtlTextStyles({
            textAlign: textAlignment,
            enableRTL: enableRTL !== undefined ? () => enableRTL : undefined,
            text: content
        })
    );
}

function createEnableRTLCombobox(): b.IBobrilNode {
    return Combobox.create({
        placeholder: "(undefined)",
        value: enableRTL,
        items: [{ label: "Enable", value: true }, { label: "Disable", value: false }],
        onChange: (value: boolean) => (enableRTL = value)
    });
}

function createTextAlignmentCombobox(): b.IBobrilNode {
    return Combobox.create({
        value: textAlignment,
        isDisabled: enableRTL !== undefined && !enableRTL,
        placeholder: "(undefined)",
        items: [
            { label: "Left", value: FormElements.TextAlign.Left },
            { label: "Center", value: FormElements.TextAlign.Center },
            { label: "Right", value: FormElements.TextAlign.Right }
        ],
        onChange: (value: FormElements.TextAlign) => (textAlignment = value)
    });
}
